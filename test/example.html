<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<script src="../build/build.js"></script>
	<script>
		var Emitter = require('emitter');
		var ControlCollection = require('control-collection');

		var i = 0;
		function createControl() {
			var name = 'control-'+(++i);
			var control = new Emitter();
			control.valid = false;
			control.getName = function() {
				return name;
			};
			control.isValid = function() {
				return control.valid;
			};
			control.validate = function() {
				var value = Math.random();
				control.valid = value > 0.5;
				this.emit('validate', control.valid, value);
			};
			return control;
		}

		var collection = new ControlCollection();

		collection.append(createControl());
		collection.append(createControl());
		collection.append(createControl());

        collection.on('control:validate', function(control, valid, value) {
            console.log('control:validate', control.getName(), valid, value);
        });

		collection.on('validate', function(valid, value) {
			console.log('collection:validate', valid, value);
		});

		collection.validate();

		console.log('is-valid', collection.isValid());

	</script>
</body>
</html>